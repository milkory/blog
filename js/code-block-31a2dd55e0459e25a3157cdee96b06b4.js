KEEP.initCodeBlock=()=>{!0===KEEP.theme_config?.code_block?.tools?.enable&&(KEEP.utils.initCodeBlockTools=()=>{var e=(KEEP.theme_config?.code_block||{})["style"],t=(KEEP.theme_config?.code_block?.tools||{})["style"];const n="mac"===(e||t||"default"),r=n?"fas fa-chevron-left":"fas fa-chevron-right",{copy:d,copied:p,fold:f,folded:u}=KEEP.language_code_block,y=`<span class="tool fold tooltip" data-tooltip-content="${f}" data-tooltip-offset-y="-2px"><i class="fas fa-chevron-down"></i></span>`;document.querySelectorAll("figure.highlight").forEach(a=>{let e=a.classList.length?a.classList[1].toUpperCase():"";"PLAINTEXT"===e&&(e="");const t=document.createElement("div");t.classList.add("highlight-container"),n&&t.classList.add("mac"),a.wrap(t);var o=e?'<span class="code-lang">'+e+"</span>":"";t.insertAdjacentHTML("afterbegin",`<div class="code-tools-box">
        ${n?y+o:"<span>"+y+o+"</span>"}
        <span class="tool copy tooltip" data-tooltip-content="${d}" data-tooltip-offset-y="-2px"><i class="fas fa-copy"></i></span>
      </div>`);const i=a.parentNode.querySelector(".code-tools-box"),l=i.querySelector(".copy"),s=i.querySelector(".fold");l.addEventListener("click",e=>{const t=e.currentTarget;e=[...a.querySelectorAll(".code .line")].map(e=>e.innerText).join("\n");const o=document.createElement("textarea"),l=(o.style.top=window.scrollY+"px",o.style.position="absolute",o.style.opacity="0",o.readOnly=!0,o.value=e,document.body.append(o),document.getSelection());var s=0<l.rangeCount&&l.getRangeAt(0),e=(o.select(),o.setSelectionRange(0,e.length),o.readOnly=!1,document.execCommand("copy"));const c=t.querySelector("i"),n=i.querySelector(".copy .tooltip-content");e?(c.className="fas fa-check",n&&(n.innerHTML=p)):c.className="fas fa-times",o.blur(),t.blur(),s&&(l.removeAllRanges(),l.addRange(s)),document.body.removeChild(o)}),l.addEventListener("mouseleave",t=>{setTimeout(()=>{t.target.querySelector("i").className="fas fa-copy";const e=i.querySelector(".copy .tooltip-content");e&&(e.innerHTML=d)},500)});let c=!1;s.addEventListener("click",e=>{const t=e.currentTarget,o=t.querySelector("i"),l=i.querySelector(".fold .tooltip-content");(c=!c)?(o.className=r,a.classList.add("folded"),i.classList.add("folded"),l&&(l.innerHTML=u)):(o.className="fas fa-chevron-down",a.classList.remove("folded"),i.classList.remove("folded"),l&&(l.innerHTML=f))})})},KEEP.utils.initCodeBlockTools());const e=document.querySelector(".post-content");e&&!e.classList.contains("code-block-unshrink")&&(KEEP.utils.shrinkCodeBlock=()=>{document.querySelectorAll("figure.highlight").forEach(e=>{{var t=e;const o=t.getBoundingClientRect().height;if(50<o-200){t.style.position="relative",t.style.overflow="hidden",t.style.height="200px";const l=document.createElement("div");l.setAttribute("class","shrink-line flex-center"),l.style.height="30px",l.style.top="170px",l.addEventListener("click",()=>{t.style.removeProperty("overflow"),t.style.overflowY="hidden",t.style.overflowX="auto",t.style.height=o+"px",l.style.display="none"}),t.appendChild(l)}return}})},KEEP.utils.shrinkCodeBlock())};